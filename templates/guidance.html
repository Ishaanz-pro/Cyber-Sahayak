<h2>Cyber Guidance</h2>
<form id="guidanceForm">
  <input type="text" id="query" placeholder="Describe your issue" required>
  <button type="submit">Get Guidance</button>
</form>
<h2>Guidance for {{ data.fraud_type }}</h2>

{% if data.error %}
    <p style="color:red;">Error: {{ data.error }}</p>
{% else %}
    <p><b>Law:</b> {{ data.law }}</p>
    <p><b>Steps:</b></p>
    <ul>
        {% for step in data.steps %}
            <li>{{ step }}</li>
        {% endfor %}
    </ul>
{% endif %}

<a href="/">â¬… Back to Home</a>

<h3>Law:</h3>
<p id="law"></p>

<h3>Steps:</h3>
<ul id="steps"></ul>

<script>
document.getElementById("guidanceForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    const query = document.getElementById("query").value;

    const response = await fetch("http://127.0.0.1:8000/get-guidance", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({query: query})
    });

    const data = await response.json();
    document.getElementById("law").innerText = data.law;

    let stepsList = document.getElementById("steps");
    stepsList.innerHTML = "";
    data.steps.forEach(step => {
        let li = document.createElement("li");
        li.textContent = step;
        stepsList.appendChild(li);
    });
});
</script>
